{% extends "base.html" %}
{% block content %}
<div class="container">
  <h4 class="mb-3">Update Expense</h4>

  <div class="card shadow-sm">
    <div class="card-body">
      <form method="POST">
        {% csrf_token %}

        <!-- BRANCH -->
        <div class="mb-3">
          <label class="form-label">Branch</label>
          <select name="branch" class="form-select" required>
            {% for branch in branches %}
            <option value="{{ branch.id }}"
              {% if expense.branch.id == branch.id %}selected{% endif %}>
              {{ branch.name }}
            </option>
            {% endfor %}
          </select>
        </div>

        <!-- VENDOR -->
        <div class="mb-3">
          <label class="form-label">Vendor</label>
          <select name="vendor" class="form-select">
            <option value="">None</option>
            {% for vendor in vendors %}
            <option value="{{ vendor.id }}"
              {% if expense.vendor and expense.vendor.id == vendor.id %}selected{% endif %}>
              {{ vendor.name }}
            </option>
            {% endfor %}
          </select>
        </div>

        <div class="form-group">
          <label>Category</label>
          <select name="category" class="form-control" required>
              {% for cat in categories %}
                  <option value="{{ cat }}" {% if expense.category == cat %}selected{% endif %}>
                      {{ cat }}
                  </option>
              {% endfor %}
          </select>
      </div>
      

        <!-- AMOUNT -->
        <div class="mb-3">
          <label class="form-label">Amount (â‚¦)</label>
          <input type="number"
                 name="amount"
                 class="form-control"
                 step="0.01"
                 value="{{ expense.amount }}"
                 required>
        </div>

        <!-- DESCRIPTION -->
        <div class="mb-3">
          <label class="form-label">Description</label>
          <textarea name="description"
                    class="form-control"
                    rows="3">{{ expense.description }}</textarea>
        </div>

        <!-- ACTIONS -->
        <div class="d-flex gap-2">
          <button type="submit" class="btn btn-success">
            Update Expense
          </button>
          <a href="{% url 'expenses' %}" class="btn btn-secondary">
            Cancel
          </a>
        </div>

      </form>
    </div>
  </div>
</div>
{% endblock %}
