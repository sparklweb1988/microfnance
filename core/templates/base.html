{% load static %}
<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <title>Loan Management System</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

    <style>
      body {
        background-color: #f4f6f9;
      }

      /* TOP NAV */
      .topbar {
        height: 60px;
      }

      .project-title {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        font-weight: 600;
        letter-spacing: 0.5px;
      }

      /* SIDEBAR */
      .sidebar {
        min-height: 100vh;
        background-color: #1f2933;
        transition: all 0.3s ease;
      }

      .sidebar.collapsed {
        margin-left: -250px;
      }

      .sidebar .nav-link {
        color: #cbd5e1;
        padding: 14px 20px;
        margin-bottom: 8px;
        border-radius: 6px;
      }

      .sidebar .nav-link:hover,
      .sidebar .nav-link.active {
        background-color: #374151;
        color: #ffffff;
      }

      .sidebar-menu {
        padding-top: 80px;
      }

      /* CONTENT */
      .content {
        padding: 24px;
        transition: margin-left 0.3s ease;
      }

      /* MOBILE */
      @media (max-width: 768px) {
        .sidebar {
          position: fixed;
          z-index: 1050;
          width: 250px;
        }
      }
    </style>
  </head>

  <body>

    <!-- TOP NAVBAR -->
    <nav class="navbar navbar-dark bg-dark topbar px-3 position-relative">
      <!-- Toggle -->
      <button class="btn btn-outline-light me-2" id="toggleSidebar">
        <i class="bi bi-list"></i>
      </button>

      <!-- Centered Project Name -->
      <span class="navbar-brand project-title">
        Loan Management System
      </span>

      <!-- User Menu -->
      <div class="dropdown ms-auto">
        <a class="text-white dropdown-toggle text-decoration-none" href="#" data-bs-toggle="dropdown">
          <i class="bi bi-person-circle fs-4"></i>
          {{ request.user.username }}
        </a>
        <ul class="dropdown-menu dropdown-menu-end">
          <li><a class="dropdown-item" href="/admin/">Admin</a></li>
          <li>
            <hr class="dropdown-divider">
          </li>
          <li><a class="dropdown-item text-danger" href="/admin/logout/">Logout</a></li>
        </ul>
      </div>
    </nav>

    <!-- MAIN LAYOUT -->
    <div class="container-fluid">
      <div class="row">

        <!-- SIDEBAR -->
        <div id="sidebar" class="col-md-3 col-lg-2 sidebar p-3">
          <div class="nav flex-column sidebar-menu">

            <!-- Dashboard -->
            <a href="/" class="nav-link">
              <i class="bi bi-speedometer2 me-2"></i> Dashboard
            </a>

            <!-- Borrowers Dropdown -->
            <div class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#borrowersMenu">
                <i class="bi bi-people me-2"></i> Borrowers
              </a>
              <div class="collapse" id="borrowersMenu">
                <ul class="nav flex-column ms-3">
                  <li><a class="nav-link" href="{% url 'borrowers' %}">View All Borrowers</a></li>
                  <li><a class="nav-link" href="{% url 'add_borrower' %}">Add Borrower</a></li>
                </ul>
              </div>
            </div>

            <!-- Loans Dropdown -->
            <div class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#loansMenu">
                <i class="bi bi-cash-stack me-2"></i> Loans
              </a>
              <div class="collapse" id="loansMenu">
                <ul class="nav flex-column ms-3">
                  <li><a class="nav-link" href="{% url 'loans' %}">View All Loans</a></li>
                  <li><a class="nav-link" href="{% url 'add_loan' %}">Add Loan</a></li>
                  <li><a class="nav-link" href="{% url 'par30_loans' %}">PAR30 Loans</a></li>
                  <li><a class="nav-link" href="{% url 'overdue_loans' %}">Overdue Loans</a></li>
                </ul>
              </div>
            </div>

            <!-- Savings Dropdown -->
            <div class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#savingsMenu">
                <i class="bi bi-piggy-bank me-2"></i> Savings
              </a>
              <div class="collapse" id="savingsMenu">
                <ul class="nav flex-column ms-3">
                  <li><a class="nav-link" href="{% url 'savings' %}">View All Savings</a></li>
                  <li><a class="nav-link" href="{% url 'add_saving' %}">Add Savings</a></li>
                </ul>
              </div>
            </div>

            <!-- Expenses Dropdown -->
            <div class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#expensesMenu">
                <i class="bi bi-receipt me-2"></i> Expenses
              </a>
              <div class="collapse" id="expensesMenu">
                <ul class="nav flex-column ms-3">
                  <li><a class="nav-link" href="{% url 'vendors' %}">View Vendors</a></li>
                  <li><a class="nav-link" href="{% url 'add_vendor' %}">Add Vendor</a></li>
                  <li><a class="nav-link" href="{% url 'expenses' %}">View Expenses</a></li>
                  <li><a class="nav-link" href="{% url 'add_expense' %}">Add Expense</a></li>
                </ul>
              </div>
            </div>

            <!-- Collection Sheets Dropdown -->
            <div class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#collectionsMenu">
                <i class="bi bi-clipboard-check me-2"></i> Collection Sheets
              </a>
              <div class="collapse" id="collectionsMenu">
                <ul class="nav flex-column ms-3">
                  <li><a class="nav-link" href="{% url 'collection_sheet' %}">Repayment</a></li>
                </ul>
              </div>
            </div>

            <!-- Reports Dropdown -->
            <div class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#reportsMenu">
                <i class="bi bi-bar-chart me-2"></i> Reports
              </a>
              <div class="collapse" id="reportsMenu">
                <ul class="nav flex-column ms-3">
                  <!-- Collections -->
                  <li><a class="nav-link" href="{% url 'reports_daily_collections' %}">Daily Collections</a></li>
                  <li><a class="nav-link" href="{% url 'reports_monthly_collections' %}">Monthly Collections</a></li>
                  <li><a class="nav-link" href="{% url 'reports_custom_collections' %}">Custom Collections</a></li>

                  <!-- Loans -->
                  <li><a class="nav-link" href="{% url 'loans' %}">Loan Portfolio</a></li>
                  <li><a class="nav-link" href="{% url 'par30_loans' %}">PAR30 Report</a></li>

                  <!-- Accounting -->
                  <li><a class="nav-link" href="{% url 'profit_loss' %}">Profit & Loss</a></li>
                  <li><a class="nav-link" href="{% url 'balance_sheet' %}">Balance Sheet</a></li>
                  <li><a class="nav-link" href="{% url 'trial_balance' %}">Trial Balance</a></li>
                  <li><a class="nav-link" href="{% url 'branch_equity' %}">Branch Equity</a></li>

                  <!-- Performance -->
                  <li><a class="nav-link" href="{% url 'reports_officer_performance' %}">Officer Performance</a></li>
                </ul>
              </div>
            </div>

            <!-- Settings Dropdown -->
            <div class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#settingsMenu">
                <i class="bi bi-gear me-2"></i> Settings
              </a>
              <div class="collapse" id="settingsMenu">
                <ul class="nav flex-column ms-3">
                  <li><a class="nav-link" href="{% url 'organization' %}">Organization Info</a></li>
                  <li><a class="nav-link" href="{% url 'branches' %}">Branches</a></li>
                  <li><a class="nav-link" href="{% url 'reports_officer_performance' %}">Loan Officers</a></li>
                </ul>
              </div>
            </div>

          </div>
        </div>

        <!-- CONTENT -->
        <div id="content" class="col content">
          {% block content %}{% endblock %}
        </div>

      </div>
    </div>

    <!-- JS -->
    <script>
      const toggleBtn = document.getElementById("toggleSidebar");
      const sidebar = document.getElementById("sidebar");

      toggleBtn.addEventListener("click", () => {
        sidebar.classList.toggle("collapsed");
      });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  </body>

</html>